import { maxBitsForList, takeNBitsBestItemsOf } from "./utils";
import { VERBS_ALL_MAP } from "./verbs";
import { IWordbank } from "../IWordbank";

const WORDS_VERBS_TRANSITIVE: string[] = [
  "accept",
  "accuse",
  "act",
  "add",
  "admit",
  "advise",
  "affect",
  "age",
  "agree",
  "aid",
  "aim",
  "air",
  "allow",
  "ally",
  "amend",
  "anger",
  "angle",
  "announce",
  "answer",
  "appeal",
  "appoint",
  "approve",
  "argue",
  "arrest",
  "ask",
  "assist",
  "attach",
  "attack",
  "attempt",
  "attend",
  "average",
  "avoid",
  "award",
  "balance",
  "ban",
  "bank",
  "bar",
  "base",
  "battle",
  "beat",
  "become",
  "begin",
  "believe",
  "best",
  "betray",
  "better",
  "bite",
  "blame",
  "bleed",
  "blind",
  "block",
  "blow",
  "board",
  "boil",
  "bomb",
  "book",
  "border",
  "borrow",
  "bottle",
  "box",
  "boycott",
  "brave",
  "break",
  "breathe",
  "bridge",
  "brief",
  "bring",
  "broadcast",
  "brown",
  "build",
  "burn",
  "burst",
  "bury",
  "bus",
  "buy",
  "call",
  "calm",
  "camp",
  "campaign",
  "cancel",
  "capture",
  "care",
  "carry",
  "catch",
  "cause",
  "celebrate",
  "center",
  "chance",
  "change",
  "charge",
  "chase",
  "cheat",
  "cheer",
  "choose",
  "circle",
  "claim",
  "clash",
  "clean",
  "clear",
  "climb",
  "close",
  "coast",
  "collect",
  "color",
  "combine",
  "come",
  "command",
  "comment",
  "communicate",
  "compare",
  "complete",
  "compound",
  "compromise",
  "concern",
  "condemn",
  "condition",
  "confirm",
  "congratulate",
  "connect",
  "consider",
  "contain",
  "continue",
  "control",
  "cook",
  "cool",
  "copy",
  "correct",
  "cost",
  "count",
  "court",
  "cover",
  "crash",
  "create",
  "credit",
  "criticize",
  "cross",
  "crowd",
  "crush",
  "cry",
  "culture",
  "cure",
  "cut",
  "dam",
  "damage",
  "dance",
  "date",
  "deal",
  "debate",
  "decide",
  "declare",
  "decrease",
  "defeat",
  "defend",
  "define",
  "delay",
  "delegate",
  "demand",
  "demonstrate",
  "denounce",
  "deny",
  "deplore",
  "deploy",
  "describe",
  "design",
  "desire",
  "destroy",
  "detail",
  "develop",
  "diet",
  "dig",
  "direct",
  "disappear",
  "disarm",
  "discover",
  "discuss",
  "dismiss",
  "dispute",
  "distance",
  "dive",
  "divide",
  "do",
  "document",
  "dream",
  "drink",
  "drive",
  "drop",
  "drown",
  "drug",
  "dry",
  "dust",
  "earn",
  "ease",
  "eat",
  "edge",
  "effect",
  "elect",
  "employ",
  "empty",
  "end",
  "enforce",
  "engineer",
  "enjoy",
  "enter",
  "equal",
  "escape",
  "establish",
  "estimate",
  "evaporate",
  "even",
  "exact",
  "examine",
  "except",
  "exchange",
  "excuse",
  "execute",
  "exercise",
  "exile",
  "expand",
  "expect",
  "expel",
  "experience",
  "explain",
  "explode",
  "explore",
  "export",
  "express",
  "extend",
  "face",
  "fail",
  "fall",
  "farm",
  "father",
  "fear",
  "feed",
  "feel",
  "field",
  "fight",
  "fill",
  "film",
  "find",
  "fine",
  "finish",
  "fire",
  "fish",
  "fit",
  "fix",
  "flag",
  "flee",
  "float",
  "flood",
  "flow",
  "flower",
  "fly",
  "follow",
  "fool",
  "force",
  "forget",
  "forgive",
  "form",
  "forward",
  "free",
  "freeze",
  "frighten",
  "fuel",
  "gain",
  "game",
  "gather",
  "get",
  "gift",
  "give",
  "go",
  "govern",
  "grind",
  "ground",
  "group",
  "grow",
  "guarantee",
  "guard",
  "guide",
  "halt",
  "hang",
  "harm",
  "harvest",
  "hate",
  "have",
  "head",
  "heal",
  "hear",
  "heat",
  "help",
  "hide",
  "hijack",
  "hit",
  "hold",
  "honor",
  "hope",
  "humor",
  "hunger",
  "hunt",
  "hurry",
  "hurt",
  "ice",
  "identify",
  "imagine",
  "import",
  "improve",
  "incite",
  "include",
  "increase",
  "infect",
  "influence",
  "inform",
  "inject",
  "injure",
  "inspect",
  "instrument",
  "insult",
  "invade",
  "invent",
  "invest",
  "investigate",
  "invite",
  "involve",
  "iron",
  "issue",
  "jail",
  "join",
  "joke",
  "judge",
  "jump",
  "keep",
  "kick",
  "kidnap",
  "kill",
  "kiss",
  "know",
  "labor",
  "lack",
  "land",
  "laugh",
  "launch",
  "lead",
  "leak",
  "learn",
  "leave",
  "lend",
  "let",
  "level",
  "lie",
  "lift",
  "light",
  "like",
  "limit",
  "line",
  "link",
  "list",
  "listen",
  "live",
  "load",
  "loan",
  "look",
  "lose",
  "love",
  "mail",
  "make",
  "map",
  "march",
  "mark",
  "market",
  "marry",
  "mate",
  "measure",
  "meet",
  "melt",
  "message",
  "milk",
  "mind",
  "mine",
  "miss",
  "mix",
  "mob",
  "model",
  "moderate",
  "mother",
  "motion",
  "mourn",
  "move",
  "murder",
  "name",
  "narrow",
  "need",
  "negotiate",
  "nominate",
  "note",
  "number",
  "obey",
  "object",
  "observe",
  "occupy",
  "offer",
  "oil",
  "open",
  "operate",
  "oppose",
  "oppress",
  "orbit",
  "order",
  "organize",
  "oust",
  "overthrow",
  "owe",
  "own",
  "paint",
  "pan",
  "parachute",
  "parade",
  "pardon",
  "parent",
  "part",
  "pass",
  "pay",
  "perfect",
  "perform",
  "permit",
  "picture",
  "piece",
  "pilot",
  "pipe",
  "place",
  "plan",
  "plant",
  "play",
  "please",
  "plot",
  "point",
  "poison",
  "police",
  "pollute",
  "position",
  "possess",
  "postpone",
  "pour",
  "power",
  "praise",
  "pray",
  "present",
  "press",
  "prevent",
  "price",
  "prize",
  "process",
  "produce",
  "profit",
  "program",
  "project",
  "propose",
  "protect",
  "protest",
  "prove",
  "provide",
  "publish",
  "pull",
  "pump",
  "punish",
  "purchase",
  "push",
  "put",
  "question",
  "quiet",
  "race",
  "radio",
  "raid",
  "rain",
  "raise",
  "rate",
  "reach",
  "react",
  "read",
  "ready",
  "reason",
  "receive",
  "recognize",
  "record",
  "recover",
  "reduce",
  "reform",
  "refuse",
  "regret",
  "reject",
  "release",
  "remember",
  "remove",
  "repair",
  "repeat",
  "report",
  "represent",
  "repress",
  "request",
  "require",
  "rescue",
  "research",
  "resign",
  "resist",
  "rest",
  "restrain",
  "restrict",
  "retire",
  "return",
  "revolt",
  "ride",
  "riot",
  "risk",
  "rob",
  "rock",
  "roll",
  "root",
  "round",
  "rub",
  "ruin",
  "rule",
  "run",
  "sabotage",
  "sacrifice",
  "sail",
  "salt",
  "sand",
  "satisfy",
  "save",
  "say",
  "search",
  "season",
  "see",
  "seed",
  "seek",
  "seize",
  "sell",
  "send",
  "sense",
  "sentence",
  "separate",
  "serve",
  "service",
  "set",
  "settle",
  "shake",
  "shape",
  "share",
  "shell",
  "shelter",
  "shine",
  "ship",
  "shock",
  "shoot",
  "shout",
  "show",
  "shrink",
  "side",
  "sign",
  "signal",
  "silence",
  "sing",
  "sink",
  "sit",
  "size",
  "sleep",
  "slide",
  "slow",
  "smash",
  "smell",
  "smoke",
  "smooth",
  "snow",
  "soil",
  "solve",
  "sort",
  "sound",
  "speak",
  "speed",
  "spend",
  "spill",
  "split",
  "spread",
  "spring",
  "spy",
  "square",
  "stab",
  "stand",
  "star",
  "start",
  "starve",
  "state",
  "station",
  "stay",
  "steal",
  "steam",
  "step",
  "stick",
  "stop",
  "store",
  "storm",
  "stretch",
  "strike",
  "study",
  "substitute",
  "succeed",
  "suffer",
  "suggest",
  "supervise",
  "supply",
  "support",
  "suppose",
  "suppress",
  "surface",
  "surprise",
  "surrender",
  "surround",
  "survive",
  "suspect",
  "suspend",
  "swallow",
  "swim",
  "take",
  "talk",
  "target",
  "taste",
  "tax",
  "teach",
  "tear",
  "telephone",
  "tell",
  "tense",
  "test",
  "thank",
  "thin",
  "think",
  "threaten",
  "throw",
  "tie",
  "time",
  "top",
  "torture",
  "total",
  "touch",
  "trade",
  "train",
  "transport",
  "trap",
  "travel",
  "treasure",
  "treat",
  "trial",
  "trick",
  "trip",
  "trouble",
  "trust",
  "try",
  "turn",
  "understand",
  "unite",
  "urge",
  "use",
  "value",
  "veto",
  "violate",
  "visit",
  "voice",
  "vote",
  "wait",
  "walk",
  "want",
  "war",
  "warm",
  "warn",
  "wash",
  "waste",
  "watch",
  "wave",
  "wear",
  "weather",
  "weigh",
  "welcome",
  "wet",
  "wheel",
  "will",
  "win",
  "wind",
  "wire",
  "wish",
  "withdraw",
  "wonder",
  "work",
  "worry",
  "wound",
  "wreck",
  "write",
  "wrong",
];

const BITS_LIST = maxBitsForList(WORDS_VERBS_TRANSITIVE);
const BITS_VERBS = BITS_LIST + 1; // present + past

const BESTWORDS_VERBS = takeNBitsBestItemsOf(
    WORDS_VERBS_TRANSITIVE,
    BITS_LIST,
    (w) => w.length);

export class TransitiveVerbBank implements IWordbank {
  bits() {
    return BITS_VERBS;
  }

  getEntry(i: number, qty?: number) {
    // `i` has enough entropy to select both the verb and its form. We split `i` into these two parts.
    const verb_i = Math.floor(i / 2);
    const tenseIsPresent = i % 2 === 0;
    const isPlural = qty && qty > 1;

    const verbWord = BESTWORDS_VERBS[verb_i];
    const overallVerb = VERBS_ALL_MAP[verbWord];
    const tenseVerb = tenseIsPresent ? overallVerb.presentSimple : overallVerb.pastSimple;

    return isPlural ? tenseVerb.p : tenseVerb.s;
  }
}
